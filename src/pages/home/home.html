<ion-header>
  <ion-navbar color="primary">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Heilen</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>

  <agm-map (mapReady)="mapReady($event)" [latitude]="lat" [longitude]="lng" [zoom]="15" [streetViewControl]="false"
    [usePanning]="false" [scrollwheel]="true" [rotateControl]="true" [zoomControl]="false">
    <agm-marker [latitude]="lat" [longitude]="lng" iconUrl="/assets/imgs/point.png"></agm-marker>
    <div *ngFor="let location of locations; let i=index">
      <!-- profesionales con icon azul -->
      <agm-marker [latitude]="location.lat" [longitude]="location.lng" *ngIf="location.id_usuario.id_especialidad.id == 1 && blue == true"
        iconUrl="/assets/imgs/ico.azul.png">
        <agm-info-window>
          <div>
            <table>
              <tr>
                <td>Rut: {{location.id_usuario.rut | uppercase}}</td>
              </tr>
              <tr>
                <td>Nombre: {{location.id_usuario.firstname | uppercase}} {{location.id_usuario.lastname | uppercase}}</td>
              </tr>
              <tr>
                <td>Email: {{location.id_usuario.username}}</td>
              </tr>
              <tr>
                <td>Calificaci贸n: {{location.id_usuario.id_calificacion.pun_final.toFixed(2)}}/5</td>
              </tr>
              <tr>
                <td>Especialidad: {{location.id_usuario.id_especialidad.nombre}}</td>
              </tr>
            </table>
            <button ion-button round color="secondary" block (click)="goToResumen(location)">
              Solicitar
            </button>
          </div>
        </agm-info-window>
      </agm-marker>
      <!-- profesionales con icon naranja -->
      <agm-marker [latitude]="location.lat" [longitude]="location.lng" *ngIf="location.id_usuario.id_especialidad.id == 2  && orange == true"
        iconUrl="/assets/imgs/ico.naranja.png">
        <agm-info-window>
          <div>
            <table>
              <tr>
                <td>Rut: {{location.id_usuario.rut | uppercase}}</td>
              </tr>
              <tr>
                <td>Nombre: {{location.id_usuario.firstname | uppercase}} {{location.id_usuario.lastname | uppercase}}</td>
              </tr>
              <tr>
                <td>Email: {{location.id_usuario.username}}</td>
              </tr>
              <tr>
                <td>Calificaci贸n: {{location.id_usuario.id_calificacion.pun_final.toFixed(2)}}/5</td>
              </tr>
              <tr>
                <td>Especialidad: {{location.id_usuario.id_especialidad.nombre}}</td>
              </tr>
            </table>
            <button ion-button round color="secondary" block (click)="goToResumen(location)">
              Solicitar
            </button>
          </div>
        </agm-info-window>
      </agm-marker>
      <!-- profesionales con icon verde -->
      <agm-marker [latitude]="location.lat" [longitude]="location.lng" *ngIf="location.id_usuario.id_especialidad.id == 3  && green == true"
        iconUrl="/assets/imgs/ico.verde.png">
        <agm-info-window>
          <div>
            <table>
              <tr>
                <td>Rut: {{location.id_usuario.rut | uppercase}}</td>
              </tr>
              <tr>
                <td>Nombre: {{location.id_usuario.firstname | uppercase}} {{location.id_usuario.lastname | uppercase}}</td>
              </tr>
              <tr>
                <td>Email: {{location.id_usuario.username}}</td>
              </tr>
              <tr>
                <td>Calificaci贸n: {{location.id_usuario.id_calificacion.pun_final.toFixed(2)}}/5</td>
              </tr>
              <tr>
                <td>Especialidad: {{location.id_usuario.id_especialidad.nombre}}</td>
              </tr>
            </table>
            <button ion-button round color="secondary" block (click)="goToResumen(location)">
              Solicitar
            </button>
          </div>
        </agm-info-window>
      </agm-marker>

    </div>
  </agm-map>

  <ion-fab top right edge>
    <button ion-fab mini>
      <ion-icon name="funnel"></ion-icon>
    </button>
    <ion-fab-list>
      <br>
      <div>
        <p class="pros">Enfermeros</p>
        <ion-checkbox color="primary" checked="true" [(ngModel)]="blue"></ion-checkbox>
      </div>
      <br>
      <div>
        <p class="pros">Kinesi贸logos</p>
        <ion-checkbox color="danger" checked="true" [(ngModel)]="orange"></ion-checkbox>
      </div>
      <br>
      <div>
        <p class="pros">Nutricionistas</p>
        <ion-checkbox color="secondary" checked="true" [(ngModel)]="green"></ion-checkbox>
      </div>
    </ion-fab-list>
  </ion-fab>

  <ion-fab right bottom>
    <button ion-fab color="light" on-click="myPosition()">
      <ion-icon name="locate"></ion-icon>
    </button>
  </ion-fab>

</ion-content>